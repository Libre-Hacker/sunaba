[gd_scene load_steps=15 format=2]

[ext_resource path="res://default_env.tres" type="Environment" id=1]
[ext_resource path="res://src/tools/editor.gd" type="Script" id=2]
[ext_resource path="res://src/camera.gd" type="Script" id=3]
[ext_resource path="res://addons/qodot/src/nodes/qodot_map.gd" type="Script" id=4]
[ext_resource path="res://addons/qodot/game_definitions/fgd/qodot_fgd.tres" type="Resource" id=5]
[ext_resource path="res://src/tools/world_properties.gd" type="Script" id=6]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/folder.png" type="Texture" id=10]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/disk.png" type="Texture" id=17]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/information.png" type="Texture" id=24]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/exit.png" type="Texture" id=30]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/group_edit.png" type="Texture" id=31]
[ext_resource path="res://assets/ui/rpgiab_icon_pack_v1.2/16x16/group_add.png" type="Texture" id=32]
[ext_resource path="res://assets/ui/carbon_ui/flat.tres" type="StyleBox" id=34]

[sub_resource type="SpatialMaterial" id=1]

[node name="Editor" type="Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 2 )

[node name="ViewportContainer" type="ViewportContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 35.0
margin_right = -168.0
stretch = true

[node name="Viewport" type="Viewport" parent="ViewportContainer"]
size = Vector2( 640, 480 )
handle_input_locally = false
render_target_update_mode = 3

[node name="World" type="Spatial" parent="ViewportContainer/Viewport"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="ViewportContainer/Viewport/World"]
environment = ExtResource( 1 )

[node name="Camera" type="Camera" parent="ViewportContainer/Viewport/World"]
transform = Transform( 1, 0, 0, 0, 0.912342, 0.409429, 0, -0.409429, 0.912342, 0, 4.83557, 8.41991 )
script = ExtResource( 3 )
sensitivity = 1.0

[node name="QodotMap" type="Spatial" parent="ViewportContainer/Viewport/World"]
script = ExtResource( 4 )
__meta__ = {
"_editor_description_": ""
}
map_file = "P:/Personal/Godot/Qodot/qodot-example/addons/qodot/example_scenes/2-miscallaneous/1-runtime-map-building/1-runtime-map-building.map"
inverse_scale_factor = 16.0
entity_fgd = ExtResource( 5 )
base_texture_dir = "res://addons/qodot/textures"
texture_file_extensions = PoolStringArray( "png" )
worldspawn_layers = [  ]
brush_clip_texture = "special/clip"
face_skip_texture = "special/skip"
texture_wads = [  ]
material_file_extension = "tres"
default_material = SubResource( 1 )
uv_unwrap_texel_size = 1.0
print_profiling_data = false
use_trenchbroom_group_hierarchy = true
tree_attach_batch_size = 16
set_owner_batch_size = 16

[node name="DirectionalLight" type="DirectionalLight" parent="ViewportContainer/Viewport/World"]
transform = Transform( -1, 8.74228e-08, 8.26597e-14, -7.92319e-08, -0.906308, 0.422618, 3.69465e-08, 0.422618, 0.906308, 0, 13.4201, 0 )
light_color = Color( 0.654902, 0.647059, 0.945098, 1 )
shadow_enabled = true

[node name="Toolbar" type="Control" parent="."]
anchor_right = 1.0
margin_bottom = 35.0

[node name="Menubar" type="HBoxContainer" parent="Toolbar"]
anchor_right = 1.0
margin_bottom = 35.0
rect_min_size = Vector2( 250, 0 )

[node name="MenuButton" type="MenuButton" parent="Toolbar/Menubar"]
margin_right = 34.0
margin_bottom = 35.0
custom_colors/font_color_focus = Color( 1, 1, 1, 1 )
custom_colors/font_color_hover = Color( 1, 1, 1, 1 )
custom_colors/font_color_pressed = Color( 1, 1, 1, 1 )
custom_styles/normal = ExtResource( 34 )
text = " file"
flat = false
items = [ "Open", ExtResource( 10 ), 0, false, false, 0, 0, null, "", false, "Save", ExtResource( 17 ), 0, false, false, 1, 0, null, "", false, "Save As", ExtResource( 17 ), 0, false, false, 2, 0, null, "", false, "Exit Map Editor", ExtResource( 30 ), 0, false, false, 3, 0, null, "", false ]

[node name="HelpMenuButton" type="MenuButton" parent="Toolbar/Menubar"]
visible = false
margin_left = 38.0
margin_right = 80.0
margin_bottom = 35.0
focus_mode = 2
text = "Help"
flat = false
items = [ "About", ExtResource( 24 ), 0, false, false, 0, 0, null, "", false ]
switch_on_hover = true

[node name="SaveDialog" type="FileDialog" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -280.0
margin_top = -188.0
margin_right = 280.0
margin_bottom = 188.0
popup_exclusive = true
window_title = "Save File"
resizable = true
access = 1

[node name="FileDialog" type="FileDialog" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -280.0
margin_top = -188.0
margin_right = 280.0
margin_bottom = 188.0
popup_exclusive = true
window_title = "Open a File"
resizable = true
mode = 0
access = 1

[node name="ImportDialog" type="FileDialog" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -280.0
margin_top = -188.0
margin_right = 280.0
margin_bottom = 188.0
popup_exclusive = true
window_title = "Open a File"
resizable = true
mode = 0
access = 2

[node name="Panel" type="Control" parent="."]
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -168.0
margin_top = 35.0

[node name="Tree" type="Tree" parent="Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 36.0

[node name="Label" type="Label" parent="Panel"]
margin_left = 8.0
margin_top = 9.0
margin_right = 50.0
margin_bottom = 29.0
text = "Props"

[node name="AddButton" type="MenuButton" parent="Panel"]
margin_left = 133.0
margin_top = 4.0
margin_right = 165.0
margin_bottom = 36.0
icon = ExtResource( 32 )
icon_align = 1
items = [ "Table", null, 0, false, false, 0, 0, null, "", false, "Beach Ball", null, 0, false, false, 1, 0, null, "", false, "Background Music", null, 0, false, false, 2, 0, null, "", false ]

[node name="Button" type="Button" parent="Panel"]
margin_left = 101.0
margin_top = 4.0
margin_right = 133.0
margin_bottom = 36.0
icon = ExtResource( 31 )
flat = true
align = 2
icon_align = 1

[node name="WorldProperties" type="WindowDialog" parent="."]
visible = true
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -216.0
margin_top = -130.0
margin_right = 216.0
margin_bottom = 130.0
popup_exclusive = true
window_title = "World Properties"
resizable = true
script = ExtResource( 6 )

[node name="Tabs" type="Tabs" parent="WorldProperties"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 8.0

[node name="TabContainer" type="TabContainer" parent="WorldProperties/Tabs"]
anchor_right = 1.0
anchor_bottom = 1.0
tab_align = 0

[node name="Map" type="Control" parent="WorldProperties/Tabs/TabContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 4.0
margin_top = 32.0
margin_right = -4.0
margin_bottom = -4.0

[node name="VBoxContainer" type="VBoxContainer" parent="WorldProperties/Tabs/TabContainer/Map"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 5.0
margin_right = 5.0
margin_bottom = 5.0

[node name="Label" type="Label" parent="WorldProperties/Tabs/TabContainer/Map/VBoxContainer"]
margin_right = 424.0
margin_bottom = 14.0
text = "Map File"
valign = 1

[node name="Path" type="LineEdit" parent="WorldProperties/Tabs/TabContainer/Map/VBoxContainer"]
margin_top = 18.0
margin_right = 424.0
margin_bottom = 42.0
editable = false

[node name="Button" type="Button" parent="WorldProperties/Tabs/TabContainer/Map/VBoxContainer"]
margin_top = 46.0
margin_right = 424.0
margin_bottom = 66.0
text = "Load Map"

[node name="Button2" type="Button" parent="WorldProperties/Tabs/TabContainer/Map/VBoxContainer"]
margin_top = 70.0
margin_right = 424.0
margin_bottom = 90.0
text = "Build Map"

[connection signal="file_selected" from="ImportDialog" to="ViewportContainer/Viewport/World/QodotMap" method="set_map_file"]
[connection signal="file_selected" from="ImportDialog" to="WorldProperties" method="_on_file_selected"]
[connection signal="pressed" from="Panel/Button" to="." method="edit_item"]
[connection signal="pressed" from="WorldProperties/Tabs/TabContainer/Map/VBoxContainer/Button" to="." method="_on_load_map_button_pressed"]
[connection signal="pressed" from="WorldProperties/Tabs/TabContainer/Map/VBoxContainer/Button2" to="ViewportContainer/Viewport/World/QodotMap" method="verify_and_build"]
